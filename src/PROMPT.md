1. Take the YouTube URL given and get a full transcript for it using https://transcriptapi.com (documentation below).

2. Generate a sluggified title for the transcript based on the substance (ie. for an interview with elon musk). Run `mkdir works/${slug-title}`. Save readme.txt with the URL of the YouTube video in it.

3. Copy the transcript and remove the timestamps and join it into one long string. Save to raw_transcript.md.

4. Convert the transcript into a formatted transcript "article" - with paragraphs, semantic breaks, formatting (bold for key terms, italic for quotes). Save to article.md

5. Analyse the transcript with up to 500 parallel subagents. Understand the core ideas. Generate a file analysis.md.

6. Compress the core ideas in analysis.md down to a dotpointed list, output in analysis_compressed.md.

999: Your working directory is `works/[slug-title]`. Put all outputs in here.


## Transcript API.

API KEY = sk_t8HuWibyrq8xeLrFcqvzz_3U3LDSVr4JOCshOlX9BjA 

{"openapi":"3.1.0","info":{"title":"YouTube Transcript API - Public","description":"## Authentication\n\nSend your API key in the Authorization header:\n```\nAuthorization: Bearer YOUR_API_KEY\n```\n\nGet an API key at https://transcriptapi.com/dashboard/api-keys\n\n---\n\n## API Parameters\n\n### GET /api/v2/youtube/transcript\n\n**Query Parameters:**\n\n- `video_url` (required): YouTube video URL or 11-character video ID\n- `format` (optional, default: `json`): Output format - `json` or `text`\n- `include_timestamp` (optional, default: `true`): Include timestamps in output\n  - When `true` with `format=json`: Returns segments with `text`, `start`, `duration`\n  - When `false` with `format=json`: Returns segments with only `text`\n  - When `true` with `format=text`: Returns timestamped lines like `[123.45s] text`\n  - When `false` with `format=text`: Returns concatenated plain text\n- `send_metadata` (optional, default: `false`): Include video metadata (title, author, thumbnail)\n\n---\n\n## Credit Usage & Billing\n\n### Credit Cost\n\n| Endpoint | Credits per Request | Notes |\n|----------|---------------------|-------|\n| `GET /api/v2/youtube/transcript` | 1 credit | Only charged on successful response (200) |\n\n### When Credits Are Charged\n\n- ✅ **Successful requests** (HTTP 200) - 1 credit\n- ✅ **Cached responses** (HTTP 200) - 1 credit\n- ❌ **Failed requests** (4xx, 5xx errors) - 0 credits\n- ❌ **Rate limited requests** (HTTP 429) - 0 credits\n\nCredits are deducted in real-time only when a transcript is successfully returned.\n\nWhen credits are exhausted, the API returns `HTTP 402 Payment Required`.\n\n---\n\n## Rate Limits\n\nAll API keys are subject to the following rate limits:\n\n- **200 requests per minute** per API key\n\n### Rate Limit Headers\n\nEach response includes rate limit information in the headers:\n\n```\nX-RateLimit-Limit: 200\nX-RateLimit-Remaining: 195\nX-RateLimit-Reset: 1678901234\n```\n\nWhen rate limited, you'll receive `HTTP 429 Too Many Requests` with a `Retry-After` header.\n\n### Best Practices\n\n1. **Implement exponential backoff** on 429 errors\n2. **Respect the `Retry-After` header** value\n3. **Cache responses** when appropriate to reduce API calls\n4. **Don't retry failed requests** more than 2 times within 3 seconds\n5. **Monitor rate limit headers** to avoid hitting limits\n\n---\n\n## Error Handling\n\nThe API uses standard HTTP status codes:\n\n| Status Code | Meaning | Retry? | Action |\n|-------------|---------|--------|--------|\n| `200` | Success | — | Transcript returned, 1 credit charged |\n| `400` | Bad Request | ❌ No | Check your request parameters |\n| `401` | Unauthorized | ❌ No | Check your API key |\n| `402` | Payment Required | ❌ No | Add credits at billing page |\n| `404` | Not Found | ❌ No | Video doesn't exist or has no transcript |\n| `408` | Timeout / Retry | ✅ **Yes** | Temporary failure (bot detection, network) - retry after 1-5s |\n| `429` | Too Many Requests | ✅ **Yes** | Rate limit exceeded - retry after `Retry-After` header |\n| `500` | Server Error | ⚠️ Maybe | Contact support if persistent |\n| `503` | Service Unavailable | ✅ **Yes** | Service temporarily down - retry after 1-5s |\n\n### Retry Strategy\n\nFor retryable errors (`408`, `429`, `503`):\n\n1. **Wait** the recommended delay (1-5s, or `Retry-After` header for 429)\n2. **Retry** up to 2-3 times with exponential backoff\n3. **Give up** after max retries and log/alert the failure\n\nFor non-retryable errors (`400`, `401`, `402`, `404`): Do not retry - fix the request or check your account.\n\n---\n\n## Support\n\nFor questions or issues, contact us at hello@transcriptapi.com\n","version":"1.0.0"},"paths":{"/api/v2/youtube/transcript":{"get":{"tags":["YouTube transcript"],"summary":"Get YouTube transcript (v2)","description":"Extract a YouTube video's transcript. Accepts a `video_url` (or bare ID).\n\n- When `format=json` and `include_timestamp=true` (default), returns a list of segments with `text`, `start`, `duration`.\n- When `format=json` and `include_timestamp=false`, returns a list of segments with only `text`.\n- When `format=text` and `include_timestamp=true` (default), returns timestamped lines: `[123.45s] text`.\n- When `format=text` and `include_timestamp=false`, returns a single concatenated transcript string.\n- Include `send_metadata=true` to receive basic video metadata.\n- Language defaults to 'en'.","operationId":"get_transcript_v2_api_v2_youtube_transcript_get","security":[{"bearerAuth":[]}],"parameters":[{"name":"video_url","in":"query","required":true,"schema":{"type":"string","pattern":"^([a-zA-Z0-9_-]{11}|https?://.*)$","description":"YouTube video URL or bare 11-char ID","title":"Video Url"},"description":"YouTube video URL or bare 11-char ID"},{"name":"send_metadata","in":"query","required":false,"schema":{"type":"boolean","description":"Include basic video metadata in response","default":false,"title":"Send Metadata"},"description":"Include basic video metadata in response"},{"name":"format","in":"query","required":false,"schema":{"$ref":"#/components/schemas/TranscriptFormatV2","description":"Response format: json or text","default":"json"},"description":"Response format: json or text"},{"name":"include_timestamp","in":"query","required":false,"schema":{"type":"boolean","description":"Include timestamps in transcript output","default":true,"title":"Include Timestamp"},"description":"Include timestamps in transcript output"}],"responses":{"200":{"description":"Transcript retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APITranscriptResponseV2"},"examples":{"json_with_timestamps":{"summary":"JSON format with timestamps (default)","value":{"video_id":"dQw4w9WgXcQ","language":"en","transcript":[{"text":"Never gonna give you up","start":0.0,"duration":4.12},{"text":"Never gonna let you down","start":4.12,"duration":3.85}],"metadata":{"title":"Rick Astley - Never Gonna Give You Up","author_name":"RickAstleyVEVO","author_url":"https://www.youtube.com/@RickAstley","thumbnail_url":"https://i.ytimg.com/vi/dQw4w9WgXcQ/hqdefault.jpg"}}},"json_without_timestamps":{"summary":"JSON format without timestamps (include_timestamp=false)","value":{"video_id":"dQw4w9WgXcQ","language":"en","transcript":[{"text":"Never gonna give you up"},{"text":"Never gonna let you down"}]}},"text_with_timestamps":{"summary":"Text format with timestamps (default)","value":{"video_id":"dQw4w9WgXcQ","language":"en","transcript":"[0.0s] Never gonna give you up\n[4.12s] Never gonna let you down\n[7.97s] Never gonna run around and desert you"}},"text_without_timestamps":{"summary":"Text format without timestamps (include_timestamp=false)","value":{"video_id":"dQw4w9WgXcQ","language":"en","transcript":"Never gonna give you up Never gonna let you down Never gonna run around and desert you"}}}}},"headers":{"X-Cache-Status":{"description":"Cache status for the request (HIT, PARTIAL-HIT, MISS)","schema":{"type":"string"}}}},"401":{"description":"Unauthorized - invalid Authorization format or API key","content":{"application/json":{"schema":{"properties":{"detail":{"description":"Human-readable error message","title":"Detail","type":"string"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional machine-readable error code","title":"Code"}},"required":["detail"],"title":"ErrorResponse","type":"object"}}},"headers":{"WWW-Authenticate":{"description":"Authentication scheme for this endpoint","schema":{"type":"string","example":"Bearer"}}}},"402":{"description":"Payment Required - inactive plan or exhausted credits","content":{"application/json":{"schema":{"$defs":{"PaymentActionDetail":{"properties":{"message":{"description":"User-friendly explanation of why payment is required","title":"Message","type":"string"},"reason":{"description":"Machine-readable reason for the payment requirement","enum":["insufficient_credits","no_active_paid_plan"],"title":"Reason","type":"string"},"action_label":{"description":"Short label for the recommended action CTA","title":"Action Label","type":"string"},"action_url":{"description":"URL to take the recommended action (top-up or pricing)","title":"Action Url","type":"string"}},"required":["message","reason","action_label","action_url"],"title":"PaymentActionDetail","type":"object"}},"properties":{"detail":{"$ref":"#/components/schemas/PaymentActionDetail"}},"required":["detail"],"title":"PaymentRequiredResponse","type":"object"},"examples":{"topup":{"summary":"Active paid plan but credits exhausted","value":{"detail":{"message":"You have an active plan, but you’ve run out of credits.","reason":"insufficient_credits","action_label":"Top up credits","action_url":"https://transcriptapi.com/top-up"}}},"billing":{"summary":"No active paid plan","value":{"detail":{"message":"You don’t have an active paid plan yet.","reason":"no_active_paid_plan","action_label":"Go to billing to choose a plan","action_url":"https://transcriptapi.com/billing"}}}}}}},"404":{"description":"**Not Found** - Video doesn't exist or has no transcript available. **Do not retry.**","content":{"application/json":{"schema":{"properties":{"detail":{"description":"Human-readable error message","title":"Detail","type":"string"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional machine-readable error code","title":"Code"}},"required":["detail"],"title":"ErrorResponse","type":"object"},"examples":{"no_transcript":{"summary":"Video has no transcript","value":{"detail":"No transcript available for video ABC123XYZ"}},"video_not_found":{"summary":"Video doesn't exist","value":{"detail":"Video not found or unavailable"}}}}}},"408":{"description":"**Request Timeout / Retry** - Temporary failure (bot detection, network issues). **Safe to retry** after a short delay (1-5 seconds).","content":{"application/json":{"schema":{"properties":{"detail":{"description":"Human-readable error message","title":"Detail","type":"string"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional machine-readable error code","title":"Code"}},"required":["detail"],"title":"ErrorResponse","type":"object"},"examples":{"retry":{"summary":"Temporary failure - retry recommended","value":{"detail":"Request failed, please retry"}}}}}},"422":{"description":"**Validation Error** - Invalid YouTube URL or video ID format. **Do not retry** with the same input.","content":{"application/json":{"schema":{"properties":{"detail":{"description":"Human-readable error message","title":"Detail","type":"string"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional machine-readable error code","title":"Code"}},"required":["detail"],"title":"ErrorResponse","type":"object"}}}},"429":{"description":"**Too Many Requests** - Rate limit exceeded. **Retry after** the delay in `Retry-After` header.","headers":{"Retry-After":{"description":"Seconds until the limit resets","schema":{"type":"integer"}},"X-RateLimit-Limit":{"description":"Total allowed requests in the window","schema":{"type":"integer"}},"X-RateLimit-Remaining":{"description":"Remaining requests in the window","schema":{"type":"integer"}},"X-RateLimit-Reset":{"description":"UTC epoch seconds when the window resets","schema":{"type":"integer"}}},"content":{"application/json":{"schema":{"properties":{"detail":{"description":"Human-readable error message","title":"Detail","type":"string"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional machine-readable error code","title":"Code"}},"required":["detail"],"title":"ErrorResponse","type":"object"}}}},"500":{"description":"**Internal Server Error** - Unexpected error. May retry, but if persistent, contact support.","content":{"application/json":{"schema":{"properties":{"detail":{"description":"Human-readable error message","title":"Detail","type":"string"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional machine-readable error code","title":"Code"}},"required":["detail"],"title":"ErrorResponse","type":"object"},"examples":{"server_error":{"summary":"Unexpected server error","value":{"detail":"Failed to retrieve transcript"}}}}}},"503":{"description":"**Service Unavailable** - Service temporarily down or initializing. **Retry** after a short delay.","content":{"application/json":{"schema":{"properties":{"detail":{"description":"Human-readable error message","title":"Detail","type":"string"},"code":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Optional machine-readable error code","title":"Code"}},"required":["detail"],"title":"ErrorResponse","type":"object"},"examples":{"unavailable":{"summary":"Service temporarily unavailable","value":{"detail":"Service temporarily unavailable"}}}}}}}}}},"components":{"schemas":{"APITranscriptResponseV2":{"properties":{"video_id":{"type":"string","title":"Video Id","description":"YouTube video ID"},"language":{"type":"string","title":"Language","description":"Language of the returned transcript"},"transcript":{"anyOf":[{"items":{"$ref":"#/components/schemas/app__api__v2__youtube__schemas__TranscriptSegment"},"type":"array"},{"items":{"$ref":"#/components/schemas/TranscriptSegmentTextOnly"},"type":"array"},{"type":"string"}],"title":"Transcript"},"metadata":{"anyOf":[{"$ref":"#/components/schemas/app__api__v2__youtube__schemas__Metadata"},{"type":"null"}]}},"type":"object","required":["video_id","language","transcript"],"title":"APITranscriptResponseV2","description":"Public API response for v2 with a simplified contract.\n\n- When format=json, `transcript` is a list of segments (with or without timestamps).\n- When format=text, `transcript` is a plain string (with or without timestamps).\n- `metadata` is returned only when requested via send_metadata=true."},"TranscriptFormatV2":{"type":"string","enum":["json","text"],"title":"TranscriptFormatV2","description":"Available transcript formats for v2 (restricted)."},"TranscriptSegmentTextOnly":{"properties":{"text":{"type":"string","title":"Text"}},"type":"object","required":["text"],"title":"TranscriptSegmentTextOnly","description":"Transcript segment without timestamp information."},"app__api__v2__youtube__schemas__Metadata":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"author_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author Name"},"author_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author Url"},"thumbnail_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Thumbnail Url"}},"type":"object","title":"Metadata"},"app__api__v2__youtube__schemas__TranscriptSegment":{"properties":{"text":{"type":"string","title":"Text"},"start":{"type":"number","title":"Start"},"duration":{"type":"number","title":"Duration"}},"type":"object","required":["text","start","duration"],"title":"TranscriptSegment"},"PaymentActionDetail":{"properties":{"message":{"description":"User-friendly explanation of why payment is required","title":"Message","type":"string"},"reason":{"description":"Machine-readable reason for the payment requirement","enum":["insufficient_credits","no_active_paid_plan"],"title":"Reason","type":"string"},"action_label":{"description":"Short label for the recommended action CTA","title":"Action Label","type":"string"},"action_url":{"description":"URL to take the recommended action (top-up or pricing)","title":"Action Url","type":"string"}},"required":["message","reason","action_label","action_url"],"title":"PaymentActionDetail","type":"object"}},"securitySchemes":{"bearerAuth":{"type":"http","description":"Use Authorization: Bearer {your_api_key}","scheme":"bearer"}}},"servers":[{"url":"https://transcriptapi.com"}],"security":[{"bearerAuth":[]}]}


## Inputs.

YouTube URL: 